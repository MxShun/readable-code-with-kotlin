# 10章 無関係な下位問題を抽出する *Extracting Unrelated Subproblems*
エンジニアリングとは、大きな問題を小さな問題に分割して、それぞれの解決策を組み立てることに他ならない。

本章のアドバイスは、無関係の下位問題を積極的に見つけて抽出することだ。

1) 関数やコードブロックを見て「このコードの高レベルの目標は何か？」と自問する
2) コードの各行に対して「高レベルの目標に直接的に効果があるか？ あるいは、無関係の下位問題を解決しているか？」と自問する
3) 無関係の下位問題を解決しているコードが相当量あれば、それらを抽出して別の関数にする

### 10.1 入門的な例 *Introductory Example*
下位問題を抽出することで、難しい計算に心を奪われることなく高レベルの目標に集中できるようになる。 
さらに言うと、再利用できるようになりユニットテストができるようになる。
完全に自己完結しているので、自分がアプリケーションにどのように利用されているのかを知らないのだ。

### 10.2 純粋なユーティリティコード *Pure Utility Code*
プログラムの核となる基本的なタスクというものがある。例えば、文字列の操作・ハッシュテーブルの使用、ファイルの読み書きなどがそうだ。

たまに自分でこの溝を埋めなきゃいけないことがある。これは「無関係の下位問題」の古典的な例だ。「このライブラリに XYZ() 関数があればいいなあ」と思ったら、その関数を自分で書けばいいのだ！ そうしたコードは複数のプロジェクトで使えるユーティリティコードになっていくだろう。

### 10.3 その他の汎用コード *Other General-Purpose Code*
コードが独立していれば改善が楽になる。関数というのは、小さくて独立したものになっていれば、機能追加・読みやすさの向上・エッジケースの処理などが楽にできる。

### 10.4 汎用コードをたくさん作る *Create a Lot of General-Purpose Code*
汎用コードは素晴らしい。プロジェクトから完全に切り離されているからだ。このようなコードは開発もテストも理解も楽だ。
君のプロジェクトもできるだけ独立したライブラリに独立した方がいい。そうすれば、残りのコードは小さくて考えやすいものになる。

### 10.5 プロジェクトに特化した機能 *Project-Specific Functionality*
抽出する下位問題というのは、プロジェクトから完全に独立したものである方がいい。ただし、完全に独立していなくても、それはそれで問題ない。下位問題を取り除くだけでも効果がある。

### 10.6 既存のインタフェースを簡潔にする *Simplifying an Existing Interface*
誰もがキレイなインタフェースを提供するライブラリが好きだ。引数は少なくて、事前設定も必要なくて、面倒なことをしなくても使えるライブラリ。インタフェースがキレイだとコードが優雅に見える。簡潔で、しかも強力だ。

インタフェースがキレイじゃなくても、自分でラップ関数を作ることができる。

### 10.7 必要に応じてインタフェースを整える *Reshaping an Interface to Your Needs*
多くのコードは、その他のコードを支援するためだけに存在する。こうした「グルー」コードは、プログラムの本質的なロジックとは関係ないことが多い。

### 10.8 やりすぎ *Taking Things Too Far*
小さな関数を作りすぎると、逆に読みにくくなってしまう。あちこちに飛び回る実行パスを追いかけることになるからだ。

新しい関数をコードに追加すると、ごくわずかに（でも確実に）読みにくさのコストが発生する。

プロジェクトの他の部分から再利用できるのであれば、小さな関数を追加するのも意味のあることかもしれない。でも、それまでは必要ない。

### 10.9 まとめ *Summary*
ほとんどのコードは汎用化できる。一般的な問題を解決するライブラリやヘルパー関数を作っていけば、プログラムに固有の小さな核だけが残る。

この技法が役に立つのは、プロジェクトの他の部分から分離された小さな問題に集中できるからだ。それに、あとでコードを再利用できるかもしれない。
